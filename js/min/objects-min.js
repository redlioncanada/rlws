var _objects=function(){var e=this;this.animations=function(){},this.animations.prototype.CameraPan=function(i,e,t,a,n,o){this.CameraPanX(t,i,t,a,n,o),this.CameraPanY(a,e,t,a,n,o)},this.animations.prototype.CameraPanX=function(i,e,t,a){"undefined"==typeof t&&(t=.01),"undefined"==typeof a&&(a=!1),"undefined"==typeof e&&(e=camera.position.x),a||(i=e+i);var n=new TWEEN.Tween({x:e}).to({x:i},1e3*t).onUpdate(function(){camera.position.x=this.x}).start()},this.animations.prototype.CameraPanY=function(i,e,t,a){"undefined"==typeof t&&(t=.01),"undefined"==typeof a&&(a=!1),"undefined"==typeof e&&(e=camera.position.y),a||(i=e+i);var n=new TWEEN.Tween({y:e}).to({y:i},1e3*t).onUpdate(function(){camera.position.y=this.y}).start()},this.animations.prototype.CameraZoom=function(i,e,t,a){"undefined"==typeof t&&(t=.01),"undefined"==typeof a&&(a=!1),"undefined"==typeof e&&(e=camera.position.z),a||(i=e+i);var n=new TWEEN.Tween({z:e}).to({z:i},1e3*t).easing(TWEEN.Easing.Cubic.InOut).onUpdate(function(){camera.position.z=this.z}).start()},this.animations.prototype.CameraMove=function(i,e,t){"undefined"==typeof t&&(t=!1),t?("undefined"!=typeof i&&(camera.position.x=i),"undefined"!=typeof e&&(camera.position.y=e)):("undefined"!=typeof i&&(camera.position.x+=i),"undefined"!=typeof e&&(camera.position.y+=e))},this.cityController=function(){this.cities=[]},this.cityController.prototype.SpawnCity=function(){var i=new e.city;this.cities.push(i)},this.city=function(){this.logMatrix=function(i){for(var e in i)for(var t in e)console.log(i[e][t])},this.buildings=[],this.buildingData=null,this.init3D()},this.city.prototype.init3D=function(){var t=gridSizex-boxwidth,a=gridSizey-boxheight,n=jitterX,o=jitterY;this.drawMatrix=math.zeros(maxX,maxY),this.dataMatrix=math.zeros(1,glCards.length),camMinHeight=0,this.buildingData=glCards.slice();for(var s=this.buildingData.length,r=!1,d=0,h=1;h<=maxY;h++){for(var f=maxX;f>=1;f--){var c={},u=new e.building(this.buildingData[d]);if("undefined"==typeof u){r=!0;break}if(!(this.drawMatrix.subset(math.index(h-1,maxX-f))>0)){if(this.drawMatrix.subset(math.index(h-1,maxX-f),Math.max(u.xsize,u.ysize)),u.ysize>1)for(i=1;i<=u.xsize;i++)this.drawMatrix.subset(math.index(h+i-1,maxX-f),Math.max(u.xsize,u.ysize));if(u.xsize>1)for(i=1;i<=u.ysize;i++)this.drawMatrix.subset(math.index(h-1,maxX-f+i),Math.max(u.xsize,u.ysize));2==u.ysize&&2==u.xsize&&this.drawMatrix.subset(math.index(h,maxX-f+1),2),this.dataMatrix.subset(math.index(0,s-this.buildingData.length),Math.max(u.xsize,u.ysize)),this.buildingData.splice(d,1),n*=-1,o*=-1;var m=a*(u.ysize-1)+boxheight*u.ysize,y=t*(u.xsize-1)+boxwidth*u.xsize,p=3*Math.random()+1;p/2+1>camMinHeight&&(camMinHeight=Math.ceil(p/2+1)),c.geometry=new THREE.BoxGeometry(y,m,p);var x=parseInt(u.hex_color,16);if(c.material=[new THREE.MeshLambertMaterial({color:x}),new THREE.MeshLambertMaterial({color:x}),new THREE.MeshLambertMaterial({color:x}),new THREE.MeshLambertMaterial({color:x}),new THREE.MeshLambertMaterial({map:THREE.ImageUtils.loadTexture(u.img)}),new THREE.MeshLambertMaterial({color:x})],c.material[4].minFilter=THREE.NearestFilter,c.cube=new THREE.Mesh(c.geometry,new THREE.MeshFaceMaterial(c.material)),c.cube.name=u.id,scene.add(c.cube),c.cube.position.x=-f*gridSizex- -(u.xsize-1)*gridSizex/2+n,c.cube.position.y=-h*gridSizey-(u.ysize-1)*gridSizey/2+o,u.setTDObject(c.cube),objects.push(c.cube),r)break}}if(r)break}},this.building=function(i){console.log(i),"undefined"!=typeof i&&(this.xsize="undefined"==typeof i.xsize?void 0:i.xsize,this.ysize="undefined"==typeof i.ysize?void 0:i.ysize,this.id="undefined"==typeof i.id?void 0:i.id,this.title="undefined"==typeof i.title?void 0:i.title,this.description="undefined"==typeof i.description?void 0:i.description,this.tags="undefined"==typeof i.tags?void 0:i.tags,this.img="undefined"==typeof i.img?void 0:i.img,this.hex_color="undefined"==typeof i.hex_color?void 0:i.hex_color),this.TDObject=void 0},this.building.prototype.setTDObject=function(i){this.TDObject=i}};