var _objects=function(){var t=this;this.animations=function(){},this.animations.prototype.CameraPan=function(i,t,e,a,n,o){this.CameraPanX(e,i,e,a,n,o),this.CameraPanY(a,t,e,a,n,o)},this.animations.prototype.CameraPanX=function(i,t,e,a){"undefined"==typeof e&&(e=.01),"undefined"==typeof a&&(a=!1),"undefined"==typeof t&&(t=camera.position.x),a||(i=t+i);var n=new TWEEN.Tween({x:t}).to({x:i},1e3*e).onUpdate(function(){camera.position.x=this.x}).start()},this.animations.prototype.CameraPanY=function(i,t,e,a){"undefined"==typeof e&&(e=.01),"undefined"==typeof a&&(a=!1),"undefined"==typeof t&&(t=camera.position.y),a||(i=t+i);var n=new TWEEN.Tween({y:t}).to({y:i},1e3*e).onUpdate(function(){camera.position.y=this.y}).start()},this.animations.prototype.CameraZoom=function(i,t,e,a){"undefined"==typeof e&&(e=.01),"undefined"==typeof a&&(a=!1),"undefined"==typeof t&&(t=camera.position.z),a||(i=t+i);var n=new TWEEN.Tween({z:t}).to({z:i},1e3*e).easing(TWEEN.Easing.Cubic.InOut).onUpdate(function(){camera.position.z=this.z}).start()},this.animations.prototype.CameraMove=function(i,t,e){"undefined"==typeof e&&(e=!1),e?("undefined"!=typeof i&&(camera.position.x=i),"undefined"!=typeof t&&(camera.position.y=t)):("undefined"!=typeof i&&(camera.position.x+=i),"undefined"!=typeof t&&(camera.position.y+=t))},this.cityController=function(){this.cities=[]},this.cityController.prototype.SpawnCity=function(){var i=new t.city;this.cities.push(i)},this.city=function(){this.logMatrix=function(i){for(var t in i)for(var e in t)console.log(i[t][e])},this.buildings=[],this.buildingData=null,this.init3D()},this.city.prototype.init3D=function(){var e=gridSizex-boxwidth,a=gridSizey-boxheight,n=jitterX,o=jitterY;this.drawMatrix=math.zeros(maxX,maxY),this.dataMatrix=math.zeros(1,glCards.length),camMinHeight=0,this.buildingData=glCards.slice();for(var s=this.buildingData.length,r=!1,d=0,h=1;h<=maxY;h++){for(var f=maxX;f>=1;f--){var u={},m=new t.building(this.buildingData[d]);if("undefined"==typeof m){r=!0;break}if(!(this.drawMatrix.subset(math.index(h-1,maxX-f))>0)){if(this.drawMatrix.subset(math.index(h-1,maxX-f),Math.max(m.xsize,m.ysize)),m.ysize>1)for(i=1;i<=m.xsize;i++)this.drawMatrix.subset(math.index(h+i-1,maxX-f),Math.max(m.xsize,m.ysize));if(m.xsize>1)for(i=1;i<=m.ysize;i++)this.drawMatrix.subset(math.index(h-1,maxX-f+i),Math.max(m.xsize,m.ysize));2==m.ysize&&2==m.xsize&&this.drawMatrix.subset(math.index(h,maxX-f+1),2),this.dataMatrix.subset(math.index(0,s-this.buildingData.length),Math.max(m.xsize,m.ysize)),this.buildingData.splice(d,1),n*=-1,o*=-1;var c=a*(m.ysize-1)+boxheight*m.ysize,y=e*(m.xsize-1)+boxwidth*m.xsize,p=3*Math.random()+1;p/2+1>camMinHeight&&(camMinHeight=Math.ceil(p/2+1)),u.geometry=new THREE.BoxGeometry(y,c,p);var x=colors[Math.round(Math.random())];if(u.material=[new THREE.MeshLambertMaterial({color:x}),new THREE.MeshLambertMaterial({color:x}),new THREE.MeshLambertMaterial({color:x}),new THREE.MeshLambertMaterial({color:x}),new THREE.MeshLambertMaterial({map:THREE.ImageUtils.loadTexture(m.img)}),new THREE.MeshLambertMaterial({color:x})],u.material[4].minFilter=THREE.NearestFilter,u.cube=new THREE.Mesh(u.geometry,new THREE.MeshFaceMaterial(u.material)),u.cube.name=s-this.buildingData.length,scene.add(u.cube),u.cube.position.x=-f*gridSizex- -(m.xsize-1)*gridSizex/2+n,u.cube.position.y=-h*gridSizey-(m.ysize-1)*gridSizey/2+o,m.setTDObject(u.cube),objects.push(u.cube),this.logMatrix(this.drawMatrix),this.logMatrix(this.dataMatrix),r)break}}if(r)break}},this.building=function(i){console.log(i),"undefined"!=typeof i&&(this.xsize="undefined"==typeof i.xsize?void 0:i.xsize,this.ysize="undefined"==typeof i.ysize?void 0:i.ysize,this.id="undefined"==typeof i.id?void 0:i.id,this.title="undefined"==typeof i.title?void 0:i.title,this.description="undefined"==typeof i.description?void 0:i.description,this.tags="undefined"==typeof i.tags?void 0:i.tags,this.img="undefined"==typeof i.img?void 0:i.img),this.TDObject=void 0},this.building.prototype.setTDObject=function(i){this.TDObject=i}};