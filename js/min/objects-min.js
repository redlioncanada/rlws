var _objects=function(){var i=this;this.animations=function(){},this.animations.prototype.CameraPan=function(i,e,t,a,n,o){this.CameraPanX(t,i,t,a,n,o),this.CameraPanY(a,e,t,a,n,o)},this.animations.prototype.CameraPanX=function(i,e,t,a){"undefined"==typeof t&&(t=.01),"undefined"==typeof a&&(a=!1),"undefined"==typeof e&&(e=camera.position.x),a||(i=e+i);var n=new TWEEN.Tween({x:e}).to({x:i},1e3*t).onUpdate(function(){camera.position.x=this.x}).start()},this.animations.prototype.CameraPanY=function(i,e,t,a){"undefined"==typeof t&&(t=.01),"undefined"==typeof a&&(a=!1),"undefined"==typeof e&&(e=camera.position.y),a||(i=e+i);var n=new TWEEN.Tween({y:e}).to({y:i},1e3*t).onUpdate(function(){camera.position.y=this.y}).start()},this.animations.prototype.CameraZoom=function(i,e,t,a){"undefined"==typeof t&&(t=.01),"undefined"==typeof a&&(a=!1),"undefined"==typeof e&&(e=camera.position.z),a||(i=e+i);var n=new TWEEN.Tween({z:e}).to({z:i},1e3*t).easing(TWEEN.Easing.Cubic.InOut).onUpdate(function(){camera.position.z=this.z}).start()},this.animations.prototype.CameraMove=function(i,e,t){"undefined"==typeof t&&(t=!1),t?("undefined"!=typeof i&&(camera.position.x=i),"undefined"!=typeof e&&(camera.position.y=e)):("undefined"!=typeof i&&(camera.position.x+=i),"undefined"!=typeof e&&(camera.position.y+=e))},this.cityController=function(){this.cities=[]},this.cityController.prototype.SpawnCity=function(){var e=new i.city;this.cities.push(e)},this.city=function(){this.logMatrix=function(i){for(var e in i)for(var t in e)console.log(i[e][t])},this.buildings=[],this.buildingData=null,this.init3D()},this.city.prototype.init3D=function(){var e=gridSizex-boxwidth,t=gridSizey-boxheight,a=jitterX,n=jitterY;this.drawMatrix=math.zeros(maxX,maxY),this.dataMatrix=math.zeros(1,glCards.length),camMinHeight=0,this.buildingData=glCards.slice();for(var o=this.buildingData.length,s=!1,r=0,d=1;d<=maxY;d++){for(var h=maxX;h>=1;h--){var f={},u=new i.building(this.buildingData[r]);if("undefined"==typeof u){s=!0;break}if(!(this.drawMatrix.subset(math.index(d-1,maxX-h))>0)){this.drawMatrix.subset(math.index(d-1,maxX-h),Math.max(u.xsize,u.ysize));var m;if(u.ysize>1)for(m=1;m<=u.xsize;m++)this.drawMatrix.subset(math.index(d+m-1,maxX-h),Math.max(u.xsize,u.ysize));if(u.xsize>1)for(m=1;m<=u.ysize;m++)this.drawMatrix.subset(math.index(d-1,maxX-h+m),Math.max(u.xsize,u.ysize));this.dataMatrix.subset(math.index(0,o-this.buildingData.length),Math.max(u.xsize,u.ysize)),this.buildingData.splice(r,1),a*=-1,n*=-1;var c=t*(u.ysize-1)+boxheight*u.ysize,y=e*(u.xsize-1)+boxwidth*u.xsize,p=3*Math.random()+1;p/2+1>camMinHeight&&(camMinHeight=Math.ceil(p/2+1)),f.geometry=new THREE.BoxGeometry(y,c,p);var l=colors[Math.round(Math.random())];if(f.material=[new THREE.MeshLambertMaterial({color:l}),new THREE.MeshLambertMaterial({color:l}),new THREE.MeshLambertMaterial({color:l}),new THREE.MeshLambertMaterial({color:l}),new THREE.MeshLambertMaterial({map:THREE.ImageUtils.loadTexture(u.img)}),new THREE.MeshLambertMaterial({color:l})],f.material[4].minFilter=THREE.NearestFilter,f.cube=new THREE.Mesh(f.geometry,new THREE.MeshFaceMaterial(f.material)),f.cube.name=o-this.buildingData.length,scene.add(f.cube),f.cube.position.x=-h*gridSizex- -(u.xsize-1)*gridSizex/2+a,f.cube.position.y=-d*gridSizey-(u.ysize-1)*gridSizey/2+n,u.setTDObject(f.cube),objects.push(f.cube),s)break}}if(s)break}},this.building=function(i){console.log(i),"undefined"!=typeof i&&(this.xsize="undefined"==typeof i.xsize?void 0:i.xsize,this.ysize="undefined"==typeof i.ysize?void 0:i.ysize,this.id="undefined"==typeof i.id?void 0:i.id,this.title="undefined"==typeof i.title?void 0:i.title,this.description="undefined"==typeof i.description?void 0:i.description,this.tags="undefined"==typeof i.tags?void 0:i.tags,this.img="undefined"==typeof i.img?void 0:i.img),this.TDObject=void 0},this.building.prototype.setTDObject=function(i){this.TDObject=i}};