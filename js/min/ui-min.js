function _webGLResizeAnon(){$(e).css("padding-top",$("#loading").height()/2-$(e).height()/2-60+"px")}function initGoogleMap(){var e=document.getElementById("map-canvas"),a=new google.maps.Map(e,{center:new google.maps.LatLng(43.6533998,-79.3742563),zoom:16,mapTypeId:google.maps.MapTypeId.ROADMAP,backgroundColor:"#fffdf2",disableDefaultUI:!0}),t=new google.maps.Marker({position:new google.maps.LatLng(43.6533998,-79.3742563),map:a,icon:"img/map-marker.png"});a.set("styles",[{stylers:[{visibility:"simplified"},{saturation:-100},{weight:4.2}]},{elementType:"labels.icon",stylers:[{saturation:-95},{visibility:"off"}]}]);var n=setInterval(function(){var e=$(".gm-style");$(e).length&&($(e).css("opacity",1),googleMapLoaded=!0,clearInterval(n))},100)}function loadGoogleMap(){var e=document.createElement("script");e.type="text/javascript",e.src="https://maps.googleapis.com/maps/api/js?v=3.exp&callback=initGoogleMap",document.body.appendChild(e)}if($("#searchCancel").on("click",function(e){SpawnAndGoToCity("home"),$("#searchCancel").velocity({opacity:"0"},{duration:400,complete:function(){$(this).css("display","none")}})}),$("#searchTerm").on("keydown",function(e){var a=$(this).val();if($(this).val().length>32){var t=a;t=t.substring(0,t.length-1),$(this).val(t)}if(13==e.keyCode&&$(this).val().length){if($("#cachedTerm").val().length){var n=SpawnAndGoToCity(a);return n&&a!=homeKeyword?$("#searchCancel").css("display","block").velocity({opacity:"1"},{duration:400}):n&&a==homeKeyword&&$("#searchCancel").velocity({opacity:"0"},{duration:400,complete:function(){$(this).css("display","none")}}),$("#cachedTerm").val(""),void $(this).val("")}return void $(this).val("")}if(9==e.keyCode||39==e.keyCode){e.preventDefault();var i=$("#cachedTerm").val();$(this).val(i)}else 8==e.keyCode&&$("#cachedTerm").val("")}),$("#searchTerm").on("input",function(e){var a=$(this).val(),t=dataController.GetIdsWithTag(a);if(0==t.length)return void $("#cachedTerm").val("");if("undefined"==typeof t[0])return void $("#cachedTerm").val("");for(var n in t){var i=t[n].split(", ");for(var o in i)if(i[o].substring(0,a.length)==a)return void $("#cachedTerm").val(i[o])}$("#cachedTerm").val("")}),Detector.webgl)$(canvasDiv).append(renderer.domElement);else{$("#loading").css({"background-image":'url("./img/rl_wordmark_transparent.png")',"background-repeat":"no-repeat","background-position":"center center","background-attachment":"fixed"});var e=Detector.addGetWebGLMessage({parent:$("#loading")});$(window).on("resize",_webGLResizeAnon),_webGLResizeAnon(),$(e).css("display","block").velocity({opacity:"1"},{duration:1e3})}var headerHeight=$("#main-header").outerHeight(),lastMenuItem,mapInterval=!1;$(".menu-item").each(function(){$(this).css("top",headerHeight-$(this).height())}),$("#menu a").click(function(){function e(){console.log("blagh"),$("#menu a").removeClass("active"),$(".menu-item").not("."+t).each(function(){$(this).velocity({top:headerHeight-$(this).height()},{duration:300})}),lastMenuItem!=t?($(a).addClass("active"),$(".menu-item."+t).velocity({top:headerHeight+1},{duration:300}),lastMenuItem=t):($(a).removeClass("active"),$(".menu-item."+t).velocity({top:headerHeight-$(".menu-item."+t).height()},{duration:300}),lastMenuItem="")}var a=this,t=$(this).attr("class").replace(" active","");if(googleMapLoaded||"contact"!=t)e();else if(!mapInterval){loadGoogleMap();var n=0;mapInterval=setInterval(function(){(googleMapLoaded||++n>0)&&(clearInterval(mapInterval),mapInterval=!1,e())},300)}}),$(".menu-item-footer").click(function(){$("#menu a").removeClass("active"),$(".menu-item").each(function(){$(this).velocity({top:headerHeight-$(this).height()},{duration:300})}),lastMenuItem=""});var googleMapLoaded=!1;