function resize(){camera.aspect=window.innerWidth/(window.innerHeight-76),renderer.setSize(window.innerWidth,window.innerHeight-76),camera.updateProjectionMatrix()}function render(){if(requestAnimationFrame(render),TWEEN.update(),!overlay){var e=xMove?-(xMove/200):.1;mLEFT&&!xMove&&(e*=-1);var r=yMove?yMove/200:.1;mDOWN&&!yMove&&(r*=-1),(mLEFT||mRIGHT)&&cameraController.PanX(e,void 0,void 0,!1),(mUP||mDOWN)&&cameraController.PanY(r,void 0,void 0,!1),mGOIN&&cameraController.Zoom(.1),mGOOUT&&cameraController.Zoom(-.1),mROTUP&&cameraController.Rotate(.03,void 0,void 0,!1),mROTDOWN&&cameraController.Rotate(-.03,void 0,void 0,!1),renderer.render(scene,camera)}}function init3D(){var e=new THREE.PlaneBufferGeometry(100,100),r=new THREE.MeshBasicMaterial({color:16776690,side:THREE.DoubleSide}),n=new THREE.Mesh(e,r);scene.add(n),n.position.z=-.2,hemilight=new THREE.HemisphereLight(10011597,16776690,1.1),scene.add(hemilight),camera.position.z=camZStart,cameraController=new objs.cameraController(camera,light),setupEventListeners(),initInterval=setInterval(function(){glCards.length>0&&(clearInterval(initInterval),dataController.SetData(glCards),cityController.SpawnCity(buildingsPerRow,buildingsPerColumn,"",glCards,2),cameraController.CenterOnCity(cityController.city,!0),cameraController.Zoom(camZEnd,void 0,camZAnimationTime,!0,!1))},500),render()}var isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent),camera=new THREE.PerspectiveCamera(60,window.innerWidth/window.innerHeight,1,1e4),scene=new THREE.Scene;scene.fog=new THREE.FogExp2(16776690,.18);var renderer=new THREE.WebGLRenderer({antialias:!0}),hemilight=null,lightintensity=40,initInterval,objects=[],objs=new _objects,cityController=new objs.cityController,cameraController=null,dataController=new objs.dataController;renderer.shadowMapEnabled=!0,resize(),document.body.appendChild(renderer.domElement),$(window).on("resize",resize);