function resize(){renderer.setSize(window.innerWidth,window.innerHeight)}function render(){if(requestAnimationFrame(render),TWEEN.update(),!overlay){var e=xMove?-(xMove/200):.1;mLEFT&&!xMove&&(e*=-1);var r=yMove?yMove/200:.1;mDOWN&&!yMove&&(r*=-1),(mLEFT||mRIGHT||xMove)&&cameraController.PanX(e,void 0,void 0,!1),(mUP||mDOWN||yMove)&&cameraController.PanY(r,void 0,void 0,!1),mGOIN&&cameraController.Zoom(.1),mGOOUT&&cameraController.Zoom(-.1),mROTUP&&cameraController.Rotate(.03,void 0,void 0,!1),mROTDOWN&&cameraController.Rotate(-.03,void 0,void 0,!1),renderer.render(scene,camera)}}function init3D(){var e=new THREE.PlaneBufferGeometry(100,100),r=new THREE.MeshPhongMaterial({color:16776690,side:THREE.DoubleSide}),n=new THREE.Mesh(e,r);scene.add(n),n.position.z=-.2,light=new THREE.PointLight(16777215,1,100),light.position.set(0,0,8),scene.add(light),camera.position.z=camZStart,cameraController=new objs.cameraController(camera,light),initInterval=setInterval(function(){glCards.length>0&&(clearInterval(initInterval),dataController.SetData(glCards),cityController.SpawnCity(buildingsPerRow,buildingsPerColumn,"",0,0,glCards),cameraController.CenterOnCity(cityController.city,!0),cameraController.Zoom(camZEnd,void 0,camZAnimationTime,!0))},500),render()}var isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent),camera=new THREE.PerspectiveCamera(60,window.innerWidth/window.innerHeight,1,1e4),scene=new THREE.Scene;scene.fog=new THREE.FogExp2(16776690,.18);var renderer=new THREE.WebGLRenderer({antialias:!0}),light=null,initInterval,objects=[],objs=new _objects,cityController=new objs.cityController,cameraController=null,dataController=new objs.dataController;renderer.shadowMapEnabled=!0,resize(),document.body.appendChild(renderer.domElement),$(window).on("resize",resize),setTimeout(function(){var e=cityController.SpawnCity(buildingsPerRow,buildingsPerColumn,"test",10,10,glCards);cityController.SetCity(e),cameraController.CenterOnCity(e),setupEventListeners(),console.log(e.extents),console.log(e.midpoint)},3e3);