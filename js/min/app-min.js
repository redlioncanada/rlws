var glCards=[],boxid,app=angular.module("redLion",["ngRoute"]);app.config(["$routeProvider",function(e){e.when("/grid",{template:" ",controller:"GridControler"}).when("/work/:campaignID/:subSection",{templateUrl:"templates/work.html",controller:"WorkCtrl"}).when("/people/:staffID",{templateUrl:"templates/people.html",controller:"PeopleCtrl"}).otherwise({redirectTo:"/grid"})}]),app.controller("CardTestController",function(e,o,t){e.cards=o.get(),init3D()}),app.controller("GridControler",function(e){console.log("grid connection")}),app.controller("WorkCtrl",["$scope","$routeParams","$sce","$timeout",function(e,o,t,n){e.campaignID=o.campaignID,e.startSection=o.subSection,e.work=dataController.GetByID(boxid),e.work.date_launched=Date.parse(e.work.date_launched);for(var r=e.work.video_comsep,l=0;l<r.length;l++)e.work.video_comsep[l]=t.trustAsResourceUrl(e.work.video_comsep[l]);console.log("Campaign ID = "+e.campaignID),console.log("subSection = "+e.startSection),console.log(e.work),closeButtonStart();var i={dots:!0,infinite:!0,speed:500,slidesToShow:1,adaptiveHeight:!0,cssEase:"easeInOut"};""!==e.work.print_comsep[0]&&n(function(){$(".printwork").slick(i)},500),""!==e.work.digital_comsep[0]&&n(function(){$(".digitalwork").slick(i)},500)}]),app.controller("PeopleCtrl",["$scope","$routeParams","$http","$animate",function(e,o,t,n){e.people=[],console.log("Person Slug = "+o.staffID),closeButtonStart(),t.get("http://redlioncanada.com/api/content/type/people").success(function(t){for(var n=0;n<t.length;n++)e.people.push(t[n]),t[n].slug==o.staffID&&(e.selperson=t[n])}).error(function(e){alert("ERROR: "+e)})}]),app.directive("peopleTile",function(){return{template:function(e,o){return'<img src="img/staff/'+o.peopleTile+'-tile.jpg" class="under"><img src="img/staff/'+o.peopleTile+'-tile-red.jpg" class="cover">'},link:function(e,o,t){o.on("mouseenter",function(){o.children("img.cover").addClass("hovered")}).on("mouseleave",function(){o.children("img.cover").removeClass("hovered")})}}}),app.factory("Cards",function(e){var o=[];return{get:function(){return 0===o.length&&e.get("http://redlioncanada.com/api/content/").success(function(e){for(var t=0,n=e.length;n>t;t++)o.push(e[t])}).error(function(e){alert("ERROR: "+e)}),glCards=o,o}}});var closeButtonStart=function(){$(".close").on("click",function(e){e.preventDefault(),$("#blackout").animate({opacity:0,"padding-top":50},1e3,"easeInCubic",function(){$(this).css({display:"none"}),window.location.href="#/grid"})})};