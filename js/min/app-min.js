var glCards=[],boxid,app=angular.module("redLion",["ngRoute"]);app.config(["$routeProvider",function(e){e.when("/grid",{template:" ",controller:"GridControler"}).when("/work/:campaignID/:subSection",{templateUrl:"templates/work.html",controller:"WorkCtrl"}).when("/people/:staffID",{templateUrl:"templates/people.html",controller:"PeopleCtrl"}).otherwise({redirectTo:"/grid"})}]),app.controller("CardTestController",function(e,o,t){e.cards=o.get(),init3D()}),app.controller("GridControler",function(e){console.log("grid connection")}),app.controller("WorkCtrl",["$scope","$routeParams","$sce",function(e,o,t){e.campaignID=o.campaignID,e.startSection=o.subSection,e.work=dataController.GetByID(boxid),e.work.date_launched=Date.parse(e.work.date_launched);for(var r=e.work.video_comsep,n=0;n<r.length;n++)e.work.video_comsep[n]=t.trustAsResourceUrl(e.work.video_comsep[n]);console.log("Campaign ID = "+e.campaignID),console.log("subSection = "+e.startSection),console.log(e.work),closeButtonStart()}]),app.controller("PeopleCtrl",["$scope","$routeParams","$http","$animate",function(e,o,t,r){e.people=[],console.log("Person Slug = "+o.staffID),closeButtonStart(),t.get("http://redlioncanada.com/api/content/type/people").success(function(t){for(var r=0;r<t.length;r++)e.people.push(t[r]),t[r].slug==o.staffID&&(e.selperson=t[r])}).error(function(e){alert("ERROR: "+e)})}]),app.directive("peopleTile",function(){return{template:function(e,o){return'<img src="img/staff/'+o.peopleTile+'-tile.jpg" class="under"><img src="img/staff/'+o.peopleTile+'-tile-red.jpg" class="cover">'},link:function(e,o,t){o.on("mouseenter",function(){o.children("img.cover").addClass("hovered")}).on("mouseleave",function(){o.children("img.cover").removeClass("hovered")})}}}),app.factory("Cards",function(e){var o=[];return{get:function(){return 0===o.length&&e.get("http://redlioncanada.com/api/content/").success(function(e){for(var t=0,r=e.length;r>t;t++)o.push(e[t])}).error(function(e){alert("ERROR: "+e)}),glCards=o,o}}});var closeButtonStart=function(){$(".close").on("click",function(e){e.preventDefault(),$("#blackout").animate({opacity:0,"padding-top":50},1e3,"easeInCubic",function(){$(this).css({display:"none"}),window.location.href="#/grid"})})};